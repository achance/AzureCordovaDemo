<!DOCTYPE html>
<html>
<head>
<title>Cordova HOL</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
/* GitHub stylesheet for MarkdownPad (http://markdownpad.com) */
/* Author: Nicolas Hery - http://nicolashery.com */
/* Version: b13fe65ca28d2e568c6ed5d7f06581183df8f2ff */
/* Source: https://github.com/nicolahery/markdownpad-github */

/* RESET
=============================================================================*/

html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
}

/* BODY
=============================================================================*/

body {
  font-family: Helvetica, arial, freesans, clean, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  color: #333;
  background-color: #fff;
  padding: 20px;
  max-width: 960px;
  margin: 0 auto;
}

body>*:first-child {
  margin-top: 0 !important;
}

body>*:last-child {
  margin-bottom: 0 !important;
}

/* BLOCKS
=============================================================================*/

p, blockquote, ul, ol, dl, table, pre {
  margin: 15px 0;
}

/* HEADERS
=============================================================================*/

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
}

h1 tt, h1 code, h2 tt, h2 code, h3 tt, h3 code, h4 tt, h4 code, h5 tt, h5 code, h6 tt, h6 code {
  font-size: inherit;
}

h1 {
  font-size: 28px;
  color: #000;
}

h2 {
  font-size: 24px;
  border-bottom: 1px solid #ccc;
  color: #000;
}

h3 {
  font-size: 18px;
}

h4 {
  font-size: 16px;
}

h5 {
  font-size: 14px;
}

h6 {
  color: #777;
  font-size: 14px;
}

body>h2:first-child, body>h1:first-child, body>h1:first-child+h2, body>h3:first-child, body>h4:first-child, body>h5:first-child, body>h6:first-child {
  margin-top: 0;
  padding-top: 0;
}

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0;
}

h1+p, h2+p, h3+p, h4+p, h5+p, h6+p {
  margin-top: 10px;
}

/* LINKS
=============================================================================*/

a {
  color: #4183C4;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

/* LISTS
=============================================================================*/

ul, ol {
  padding-left: 30px;
}

ul li > :first-child, 
ol li > :first-child, 
ul li ul:first-of-type, 
ol li ol:first-of-type, 
ul li ol:first-of-type, 
ol li ul:first-of-type {
  margin-top: 0px;
}

ul ul, ul ol, ol ol, ol ul {
  margin-bottom: 0;
}

dl {
  padding: 0;
}

dl dt {
  font-size: 14px;
  font-weight: bold;
  font-style: italic;
  padding: 0;
  margin: 15px 0 5px;
}

dl dt:first-child {
  padding: 0;
}

dl dt>:first-child {
  margin-top: 0px;
}

dl dt>:last-child {
  margin-bottom: 0px;
}

dl dd {
  margin: 0 0 15px;
  padding: 0 15px;
}

dl dd>:first-child {
  margin-top: 0px;
}

dl dd>:last-child {
  margin-bottom: 0px;
}

/* CODE
=============================================================================*/

pre, code, tt {
  font-size: 12px;
  font-family: Consolas, "Liberation Mono", Courier, monospace;
}

code, tt {
  margin: 0 0px;
  padding: 0px 0px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px;
}

pre>code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent;
}

pre {
  background-color: #f8f8f8;
  border: 1px solid #ccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px;
}

pre code, pre tt {
  background-color: transparent;
  border: none;
}

kbd {
    -moz-border-bottom-colors: none;
    -moz-border-left-colors: none;
    -moz-border-right-colors: none;
    -moz-border-top-colors: none;
    background-color: #DDDDDD;
    background-image: linear-gradient(#F1F1F1, #DDDDDD);
    background-repeat: repeat-x;
    border-color: #DDDDDD #CCCCCC #CCCCCC #DDDDDD;
    border-image: none;
    border-radius: 2px 2px 2px 2px;
    border-style: solid;
    border-width: 1px;
    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
    line-height: 10px;
    padding: 1px 4px;
}

/* QUOTES
=============================================================================*/

blockquote {
  border-left: 4px solid #DDD;
  padding: 0 15px;
  color: #777;
}

blockquote>:first-child {
  margin-top: 0px;
}

blockquote>:last-child {
  margin-bottom: 0px;
}

/* HORIZONTAL RULES
=============================================================================*/

hr {
  clear: both;
  margin: 15px 0;
  height: 0px;
  overflow: hidden;
  border: none;
  background: transparent;
  border-bottom: 4px solid #ddd;
  padding: 0;
}

/* TABLES
=============================================================================*/

table th {
  font-weight: bold;
}

table th, table td {
  border: 1px solid #ccc;
  padding: 6px 13px;
}

table tr {
  border-top: 1px solid #ccc;
  background-color: #fff;
}

table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

/* IMAGES
=============================================================================*/

img {
  max-width: 100%
}
</style>
<style type="text/css">
.highlight  { background: #ffffff; }
.highlight .c { color: #999988; font-style: italic } /* Comment */
.highlight .err { color: #a61717; background-color: #e3d2d2 } /* Error */
.highlight .k { font-weight: bold } /* Keyword */
.highlight .o { font-weight: bold } /* Operator */
.highlight .cm { color: #999988; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #999999; font-weight: bold } /* Comment.Preproc */
.highlight .c1 { color: #999988; font-style: italic } /* Comment.Single */
.highlight .cs { color: #999999; font-weight: bold; font-style: italic } /* Comment.Special */
.highlight .gd { color: #000000; background-color: #ffdddd } /* Generic.Deleted */
.highlight .gd .x { color: #000000; background-color: #ffaaaa } /* Generic.Deleted.Specific */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #aa0000 } /* Generic.Error */
.highlight .gh { color: #999999 } /* Generic.Heading */
.highlight .gi { color: #000000; background-color: #ddffdd } /* Generic.Inserted */
.highlight .gi .x { color: #000000; background-color: #aaffaa } /* Generic.Inserted.Specific */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #555555 } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #aaaaaa } /* Generic.Subheading */
.highlight .gt { color: #aa0000 } /* Generic.Traceback */
.highlight .kc { font-weight: bold } /* Keyword.Constant */
.highlight .kd { font-weight: bold } /* Keyword.Declaration */
.highlight .kp { font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #445588; font-weight: bold } /* Keyword.Type */
.highlight .m { color: #009999 } /* Literal.Number */
.highlight .s { color: #d14 } /* Literal.String */
.highlight .na { color: #008080 } /* Name.Attribute */
.highlight .nb { color: #0086B3 } /* Name.Builtin */
.highlight .nc { color: #445588; font-weight: bold } /* Name.Class */
.highlight .no { color: #008080 } /* Name.Constant */
.highlight .ni { color: #800080 } /* Name.Entity */
.highlight .ne { color: #990000; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #990000; font-weight: bold } /* Name.Function */
.highlight .nn { color: #555555 } /* Name.Namespace */
.highlight .nt { color: #000080 } /* Name.Tag */
.highlight .nv { color: #008080 } /* Name.Variable */
.highlight .ow { font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mf { color: #009999 } /* Literal.Number.Float */
.highlight .mh { color: #009999 } /* Literal.Number.Hex */
.highlight .mi { color: #009999 } /* Literal.Number.Integer */
.highlight .mo { color: #009999 } /* Literal.Number.Oct */
.highlight .sb { color: #d14 } /* Literal.String.Backtick */
.highlight .sc { color: #d14 } /* Literal.String.Char */
.highlight .sd { color: #d14 } /* Literal.String.Doc */
.highlight .s2 { color: #d14 } /* Literal.String.Double */
.highlight .se { color: #d14 } /* Literal.String.Escape */
.highlight .sh { color: #d14 } /* Literal.String.Heredoc */
.highlight .si { color: #d14 } /* Literal.String.Interpol */
.highlight .sx { color: #d14 } /* Literal.String.Other */
.highlight .sr { color: #009926 } /* Literal.String.Regex */
.highlight .s1 { color: #d14 } /* Literal.String.Single */
.highlight .ss { color: #990073 } /* Literal.String.Symbol */
.highlight .bp { color: #999999 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #008080 } /* Name.Variable.Class */
.highlight .vg { color: #008080 } /* Name.Variable.Global */
.highlight .vi { color: #008080 } /* Name.Variable.Instance */
.highlight .il { color: #009999 } /* Literal.Number.Integer.Long */
.pl-c {
    color: #969896;
}

.pl-c1,.pl-mdh,.pl-mm,.pl-mp,.pl-mr,.pl-s1 .pl-v,.pl-s3,.pl-sc,.pl-sv {
    color: #0086b3;
}

.pl-e,.pl-en {
    color: #795da3;
}

.pl-s1 .pl-s2,.pl-smi,.pl-smp,.pl-stj,.pl-vo,.pl-vpf {
    color: #333;
}

.pl-ent {
    color: #63a35c;
}

.pl-k,.pl-s,.pl-st {
    color: #a71d5d;
}

.pl-pds,.pl-s1,.pl-s1 .pl-pse .pl-s2,.pl-sr,.pl-sr .pl-cce,.pl-sr .pl-sra,.pl-sr .pl-sre,.pl-src,.pl-v {
    color: #df5000;
}

.pl-id {
    color: #b52a1d;
}

.pl-ii {
    background-color: #b52a1d;
    color: #f8f8f8;
}

.pl-sr .pl-cce {
    color: #63a35c;
    font-weight: bold;
}

.pl-ml {
    color: #693a17;
}

.pl-mh,.pl-mh .pl-en,.pl-ms {
    color: #1d3e81;
    font-weight: bold;
}

.pl-mq {
    color: #008080;
}

.pl-mi {
    color: #333;
    font-style: italic;
}

.pl-mb {
    color: #333;
    font-weight: bold;
}

.pl-md,.pl-mdhf {
    background-color: #ffecec;
    color: #bd2c00;
}

.pl-mdht,.pl-mi1 {
    background-color: #eaffea;
    color: #55a532;
}

.pl-mdr {
    color: #795da3;
    font-weight: bold;
}

.pl-mo {
    color: #1d3e81;
}
.task-list {
padding-left:10px;
margin-bottom:0;
}

.task-list li {
    margin-left: 20px;
}

.task-list-item {
list-style-type:none;
padding-left:10px;
}

.task-list-item label {
font-weight:400;
}

.task-list-item.enabled label {
cursor:pointer;
}

.task-list-item+.task-list-item {
margin-top:3px;
}

.task-list-item-checkbox {
display:inline-block;
margin-left:-20px;
margin-right:3px;
vertical-align:1px;
}
</style>
</head>
<body>
<p><a name="HOLTitle"></a></p>
<h1>Building Cross-Platform Mobile Apps with Visual Studio, Apache Cordova, and Microsoft Azure</h1>
<hr>
<p><a name="Overview"></a></p>
<h2>Overview</h2>
<p><a href="https://cordova.apache.org/">Apache Cordova</a> is an open-source framework for developing cross-platform mobile apps using industry-standard technologies such as HTML5, CSS3, and JavaScript. It is especially useful in organizations that already have expertise developing Web apps. In Cordova, your app is basically built as a Web application, with the Cordova framework providing a platform-specific WebView control to render the user interface and a JavaScript API for accessing the features and APIs in the underlying operating system. Essentially, your app runs as an "app within an app" and enjoys access to a rich feature set that exceeds that of a traditional Web application.</p>
<p>The <a href="https://www.visualstudio.com/vs/cordova/">Visual Studio tools for Apache Cordova</a> extend Visual Studio to support the development of Cordova apps that target Windows, iOS, and Android. These tools provide project templates for creating Cordova apps in JavaScript and TypeScript. The Visual Studio IDE is a powerful productivity tool, and it includes features such as syntax highlighting, Intellisense, GUI-facilitated project and plugin configuration, integrated source control, integrated debugging, and built-in deployment tooling.</p>
<p><a href="https://azure.microsoft.com/en-us/services/app-service/mobile/">Azure Mobile Apps</a> are part of the <a href="https://azure.microsoft.com/en-us/services/app-service/">Azure App Service</a> platform-as-a-service offering and include numerous features that aid in the development of cross-platform mobile apps, including support for single sign-on, push notifications across a range of devices, offline syncing, and <a href="https://blog.xamarin.com/getting-started-azure-mobile-apps-easy-tables/">Easy Tables</a> for back-end storage. If every great front end needs a great back end as well, Azure Mobile Apps are designed to make implementing rich server-side infrastructure as simple as possible.</p>
<p>In this lab, you will learn how to use Visual Studio 2017 and Apache Cordova to create cross-platform mobile apps. You will also deploy an Azure Mobile App to serve as a back end and learn how to use Cordova to access this service and extend your apps to the cloud.</p>
<p><a name="Objectives"></a></p>
<h3>Objectives</h3>
<p>In this hands-on lab, you will learn how to:</p>
<ul>
<li>Create a new Cordova project in Visual Studio 2017</li>
<li>Use Cordova Simulate to test Cordova apps</li>
<li>Incorporate platform-specific resources in Cordova apps</li>
<li>Use Cordova Plugins to access device functionality</li>
<li>Connect Cordova apps to Azure Mobile App back ends</li>
</ul>
<p><a name="Prerequisites"></a></p>
<h3>Prerequisites</h3>
<p>The following are required to complete this hands-on lab:</p>
<ul>
<li><a href="https://www.google.com/chrome/browser">Google Chrome</a></li>
<li><a href="https://www.visualstudio.com/vs/visual-studio-2017-rc">Visual Studio 2017 RC</a> Community Edition or higher with the <strong>Mobile Development with JavaScript</strong> workload installed</li>
<li>An active Microsoft Azure subscription. If you don't have one, <a href="http://aka.ms/WATK-FreeTrial">sign up for a free trial</a>.</li>
</ul>
<p><a name="Exercises"></a></p>
<h2>Exercises</h2>
<p>This hands-on lab includes the following exercises:</p>
<ul>
<li><a href="#Exercise1">Exercise 1: Create a Cordova Project in Visual Studio</a></li>
<li><a href="#Exercise2">Exercise 2: Add platform-specific code</a></li>
<li><a href="#Exercise3">Exercise 3: Add a Cordova plugin</a></li>
<li><a href="#Exercise4">Exercise 4: Deploy an Azure Mobile App</a></li>
<li><a href="#Exercise5">Exercise 5: Connect to the Azure Mobile App</a></li>
<li><a href="#Exercise6">Exercise 6: Delete the Azure Mobile App</a></li>
</ul>
<p>Estimated time to complete this lab: <strong>60</strong> minutes.</p>
<p><a name="Exercise1"></a></p>
<h2>Exercise 1: Create a Cordova Project in Visual Studio</h2>
<p>The Visual Studio Tools for Apache Cordova allow you to use Visual Studio 2017 to build, manage, and test Cordova apps that run on Android, iOS, and Windows. In this exercise, you will create a new Cordova project in Visual Studio and debug it using Cordova Simulate, which runs your app in a simulated environment in Google Chrome. You can learn more about Cordova Simulate at <a href="https://taco.visualstudio.com/en-us/docs/vs-taco-2017-cordova-simulate/">https://taco.visualstudio.com/en-us/docs/vs-taco-2017-cordova-simulate/</a>.</p>
<blockquote>
<p>Your Cordova app will run as an iOS app in Cordova Simulate, but if you want to deploy it to Apple's iOS emulator, to Apple devices, or to Apple's App Store, you must have a Mac running XCode.</p>
</blockquote>
<ol>
<li>
<p>Launch Visual Studio 2017 and create a new project by selecting <strong>File</strong> -&gt; <strong>New</strong> -&gt; <strong>Project</strong>.</p>
<p><a href="Images/basic-file-newproject.png" target="_blank"><img src="Images/basic-file-newproject.png" alt="Creating a new project" style="max-width:100%;"></a></p>
<p><em>Creating a new project</em></p>
</li>
<li>
<p>In the "New Project" dialog, select <strong>Mobile Apps</strong> under <strong>JavaScript</strong>. (Note that <strong>JavaScript</strong> may be listed directly under the <strong>Templates</strong> node, or it may be under <strong>Other Languages</strong>, depending on how Visual Studio is configured.) Select <strong>Blank App (Apache Cordova)</strong> as the project type and enter "BasicCordovaApp" as the project name. Then click <strong>OK</strong>.</p>
<p><a href="Images/basic-newproject-settings.png" target="_blank"><img src="Images/basic-newproject-settings.png" alt="Setting up the project" style="max-width:100%;"></a></p>
<p><em>Setting up the project</em></p>
</li>
<li>
<p>Take a moment to examine the solution that was created. Key elements include:</p>
<ul>
<li>The <strong>Dependencies</strong> folder, which contains any Bower or NPM packages loaded into the project</li>
<li>The <strong>merges</strong> folder, which contains files that pertain to specific platforms</li>
<li>The <strong>res</strong> folder, which contains resources such as icons and splash-screen images</li>
<li>The <strong>www</strong> folder, which contains HTML, CSS, and JavaScript assets, including the <strong>index.html</strong> file that serves as the app's home page</li>
<li>Several files at the root level, including <strong>config.xml</strong>, which includes settings that Cordova uses to build and run your app</li>
</ul>
<p><a href="Images/basic-newproject-solution.png" target="_blank"><img src="Images/basic-newproject-solution.png" alt="The Cordova solution" style="max-width:100%;"></a></p>
<p><em>The Cordova solution</em></p>
</li>
<li>
<p>Select <strong>Build Solution</strong> from Visual Studio's <strong>Build</strong> menu to build the project.</p>
<blockquote>
<p>The first time you build the project, Visual Studio will retrieve the Cordova runtime version that is specified in the project's config.xml file. Because of this, your first build will take a little extra time and requires an active Internet connection.</p>
</blockquote>
</li>
<li>
<p>The next step is to run your Cordova app in Cordova Simulate with the Visual Studio debugger attached. Cordova Simulate supports Android and iOS applications, but it does not currently support Windows apps. To simulate your app on Android, click <strong>Simulate in Browser - Nexus 7 (Tablet)</strong>.</p>
<p><a href="Images/basic-debug-simulateinbrowser.png" target="_blank"><img src="Images/basic-debug-simulateinbrowser.png" alt="Launching the app in Cordova Simulate" style="max-width:100%;"></a></p>
<p><em>Launching the app in Cordova Simulate</em></p>
</li>
<li>
<p>Wait a few seconds for Google Chrome to open and show the running app.</p>
<blockquote>
<p>If you are warned that "Windows Firewall has blocked some features of this app," click <strong>Allow access</strong> to allow the simulator to get through the firewall.</p>
</blockquote>
<p><a href="Images/basic-debug-cordovasimulate.png" target="_blank"><img src="Images/basic-debug-cordovasimulate.png" alt="App running in Cordova Simulate" style="max-width:100%;"></a></p>
<p><em>App running in Cordova Simulate</em></p>
</li>
<li>
<p>Return to Visual Studio and to the DOM Explorer that opened when you launched the app. DOM Explorer shows an interactive view of the app's HTML DOM (Document Object Model). It also allows you to make changes to the HTML and related style elements while your app is running and preview these changes in the user interface.</p>
<p><a href="Images/basic-debug-domexplorer.png" target="_blank"><img src="Images/basic-debug-domexplorer.png" alt="The DOM Explorer in Visual Studio" style="max-width:100%;"></a></p>
<p><em>The DOM Explorer in Visual Studio</em></p>
</li>
<li>
<p>To demonstrate interactive changes in DOM Explorer, select the <code>&lt;p class="event received"&gt;</code> element highlighted on the left below. Then, in the "Styles" panel on the right, change the <code>background-color</code> attribute of the <code>.event.received</code> style selector to "blue." Now go back to the Chrome and examine the app. What changed, and why?</p>
<p><a href="Images/basic-debug-update-style.png" target="_blank"><img src="Images/basic-debug-update-style.png" alt="Modifying the DOM in DOM Explorer" style="max-width:100%;"></a></p>
<p><em>Modifying the DOM in DOM Explorer</em></p>
</li>
<li>
<p>Return to Visual Studio and select <strong>Stop Debugging</strong> from the <strong>Debug</strong> menu.</p>
</li>
<li>
<p>Next you will modify some of the JavaScript code in the app and learn how to use breakpoints to debug it. Begin by going to Solution Explorer and double-clicking the <strong>index.js</strong> file in the <strong>www/scripts</strong> folder to open it for editing. Then replace the existing <code>onPause</code> and <code>onResume</code> functions with the functions below:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-k">function</span> <span class="pl-en">onPause</span>() {
    <span class="pl-c"><span class="pl-c">//</span> TODO: This application has been suspended. Save application state here.</span>
    <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">"</span>Pausing<span class="pl-pds">"</span></span>);
};

<span class="pl-k">function</span> <span class="pl-en">onResume</span>() {
    <span class="pl-c"><span class="pl-c">//</span> TODO: This application has been reactivated. Restore application state here.</span>
    <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">"</span>Resuming<span class="pl-pds">"</span></span>);
};</pre></div>
</li>
<li>
<p>Add a breakpoint to the <code>console.log</code> statement in <code>onPause</code> by putting the cursor on the line and pressing <strong>F9</strong>, or by cicking in the vertical bar to the left of the line number.</p>
<p><a href="Images/set-breakpoint.png" target="_blank"><img src="Images/set-breakpoint.png" alt="Setting a breakpoint" style="max-width:100%;"></a></p>
<p><em>Setting a breakpoint</em></p>
</li>
<li>
<p>Select <strong>Start Debugging</strong> from the <strong>Debug</strong> menu (or press <strong>F5</strong>) to launch the application again.</p>
</li>
<li>
<p>Click the <strong>Plugin Controls - Simulate</strong> tab in Visual Studio and locate the "Events" panel. Select <strong>pause</strong> from the list of events, and then click <strong>Fire Event</strong> to simulate a <code>pause</code> event.</p>
<p><a href="Images/basic-debug-pauseevent.png" target="_blank"><img src="Images/basic-debug-pauseevent.png" alt="Simulating a pause event" style="max-width:100%;"></a></p>
<p><em>Simulating a pause event</em></p>
</li>
<li>
<p>Observe that Visual Studio pauses execution at the breakpoint you set in <strong>index.js</strong>. Resume execution by selecting <strong>Continue</strong> from the <strong>Debug</strong> menu , clicking the <strong>Continue</strong> button in the toolbar, or pressing <strong>F5</strong>, and notice that "Pausing" appears in the JavaScript console.</p>
<p><a href="Images/basic-debug-breakpoint.png" target="_blank"><img src="Images/basic-debug-breakpoint.png" alt="Hitting a breakpoint in Visual Studio" style="max-width:100%;"></a></p>
<p><em>Hitting a breakpoint in Visual Studio</em></p>
</li>
<li>
<p>Simulate a <code>resume</code> event by returning to <strong>Plugin Controls - Simulate</strong> and selecting <strong>resume</strong> from the list of events and clicking the <strong>Fire Event</strong> button. Notice that "Resuming" appears in the JavaScript console.</p>
<blockquote>
<p><code>pause</code> and <code>resume</code> events are important markers in the lifetime of a Cordova app because they are fired by Cordova when execution of an app is paused or resumed. This gives you the opportunity to save the app's state when execution is paused, and restore it again when execution is resumed. This is important becaue many mobile operating systems pause an app when it exits the foreground and reserve the option of discarding the app's state in order to conserve memory. If state is discarded and the app fails to restore it in response to <code>resume</code> events, the user is liable to lose precious work simply by switching away from the app.</p>
</blockquote>
</li>
<li>
<p>Select <strong>Stop Debugging</strong> from the <strong>Debug</strong> menu to stop debugging.</p>
</li>
<li>
<p>Click the breakpoint to remove it.</p>
</li>
</ol>
<p>You now know how to create a Cordova project, how to launch it in Cordova Simulate, how to use DOM Explorer to view and even modify DOM elements, and how to perform basic debugging tasks. The next step is to begin customizing the app, and to learn how to incorporate platform-specific code.</p>
<p><a name="Exercise2"></a></p>
<h2>Exercise 2: Add platform-specific code</h2>
<p>Apache Cordova projects include the <strong>merges</strong> folder in order to support platform-specific elements. This is useful when you need to support different features on different platforms, or comply with design standards that differ from one platform to the next. In this exercise, you will modify the app you built in the previous exercise to show different content on different platforms.</p>
<blockquote>
<p>The JavaScript that you write in this exercise will use jQuery to manipulate DOM content. Many Cordova apps use jQuery as well as other popular JavaScript libraries and frameworks such as AngularJS and Ionic.</p>
</blockquote>
<ol>
<li>
<p>Right-click the project in Solution Explorer and select <strong>Add -&gt; New Item...</strong> to add a new file to the project. Select <strong>Text File</strong> as the file type and name the file <strong>.bowerrc</strong>. Then click the <strong>Add</strong> button.</p>
<p><a href="Images/add-bowerrc.png" target="_blank"><img src="Images/add-bowerrc.png" alt="Adding .bowerrc to the project" style="max-width:100%;"></a></p>
<p><em>Adding .bowerrc to the project</em></p>
</li>
<li>
<p>Add the following JSON to the new file, and then save your changes:</p>
<div class="highlight highlight-source-json"><pre>{
  <span class="pl-s"><span class="pl-pds">"</span>directory<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>www/lib<span class="pl-pds">"</span></span>
}</pre></div>
<blockquote>
<p>When you use Bower to import a JavaScript library, it often brings in a variety of files. You can either download the files to an intermediate location and individually copy just the files you want to your project — generally a manual process — or you can use the Bower configuration file to indicate which files to load. In this example, you are specifying that the entire Bower package contents should be downloaded to the app's <strong>www/lib</strong> folder.</p>
</blockquote>
</li>
<li>
<p>Use the <strong>Build -&gt; Build Solution</strong> command to build the project.</p>
</li>
<li>
<p>The next step is to use the Bower package manager to add jQuery to your project. Begin by selecting <strong>Manage Bower Packages...</strong> from the <strong>Project</strong> menu.</p>
</li>
<li>
<p>Click <strong>Browse</strong>. Then select <strong>jQuery</strong> and click the <strong>Install</strong> button on the right.</p>
<p><a href="Images/platform-bower-jquery.png" target="_blank"><img src="Images/platform-bower-jquery.png" alt="Including the jQuery Bower package" style="max-width:100%;"></a></p>
<p><em>Including the jQuery Bower package</em></p>
</li>
<li>
<p>Open <strong>index.html</strong>, which is located in the project's <strong>www</strong> folder.</p>
</li>
<li>
<p>Add the following line of markup after the line that reads <code>&lt;h1&gt;Apache Cordova&lt;/h1&gt;</code>:</p>
<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">h2</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>ex2Platform<span class="pl-pds">"</span></span>&gt;Override Platform&lt;/<span class="pl-ent">h2</span>&gt;</pre></div>
</li>
<li>
<p>Add the following line before the first <code>&lt;script&gt;</code> element at the end of the file and save your changes to <strong>index.html</strong>:</p>
<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">script</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text/javascript<span class="pl-pds">"</span></span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>lib/jquery/dist/jquery.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre></div>
</li>
<li>
<p>In Solution Explorer, double-click the <strong>platformOverrides.js</strong> file in the <strong>merges/android/scripts</strong> folder to open it for editing.</p>
<blockquote>
<p>As the path name implies, code added to this platformOverrides.js file will only be used when the app runs on Android.</p>
</blockquote>
</li>
<li>
<p>Add the following line of code to the end of the self-executing function body to locate the element whose ID is "ex2Platform" and replace its contents with the word "Android," and then save the file:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-en">$</span>(<span class="pl-s"><span class="pl-pds">"</span>#ex2Platform<span class="pl-pds">"</span></span>).<span class="pl-en">html</span>(<span class="pl-s"><span class="pl-pds">"</span>Android<span class="pl-pds">"</span></span>);</pre></div>
</li>
<li>
<p>Right-click the <strong>merges/iOS</strong> folder in Solution Explorer and select <strong>Add -&gt; New Folder...</strong> from the context menu to add a new folder to the project. Name the new folder "scripts."</p>
</li>
<li>
<p>Right-click the <strong>scripts</strong> folder that you just created and select <strong>Add -&gt; New Item...</strong> from the context menu.</p>
</li>
<li>
<p>In the ensuing dialog, select <strong>JavaScript File</strong> as the file type and name the file <strong>platformOverrides.js</strong>. Then click the <strong>Add</strong> button to add the file to the folder.</p>
</li>
<li>
<p>Add the following code, which locates the element whose ID is "ex2Platform" and replaces its contents with the word "iOS", to the <strong>platformOverrides.js</strong> file you just created. Then save the file.</p>
<div class="highlight highlight-source-js"><pre>(<span class="pl-k">function</span> () {
    <span class="pl-en">$</span>(<span class="pl-s"><span class="pl-pds">"</span>#ex2Platform<span class="pl-pds">"</span></span>).<span class="pl-en">html</span>(<span class="pl-s"><span class="pl-pds">"</span>iOS<span class="pl-pds">"</span></span>);
} ());</pre></div>
</li>
<li>
<p>The next step is to run the app on iOS and Android and see the effects of the per-platform code. Make sure that <strong>Android</strong> is selected in the drop-down list of platforms and one of the <strong>Simulate in Browser</strong> options is selected. Then click <strong>Simulate in Browser</strong> to run the app in Cordova Simulate.</p>
<p><a href="Images/platform-android-debug.png" target="_blank"><img src="Images/platform-android-debug.png" alt="Simulating the app on Android" style="max-width:100%;"></a></p>
<p><em>Simulating the app on Android</em></p>
</li>
<li>
<p>Confirm that the app displays "Android" as the platform name.</p>
<p><a href="Images/platform-android-simulate.png" target="_blank"><img src="Images/platform-android-simulate.png" alt="BasicCordovaApp running on Android" style="max-width:100%;"></a></p>
<p><em>BasicCordovaApp running on Android</em></p>
</li>
<li>
<p>Return to Visual Studio and stop the debugger. Select <strong>iOS</strong> as the platform and make sure one of the <strong>Simulate in Browser</strong> options is selected. Then click <strong>Simulate in Browser</strong> to run the app in Cordova Simulate.</p>
<p><a href="Images/platform-iOS-debug.png" target="_blank"><img src="Images/platform-iOS-debug.png" alt="Simulating the app on iOS" style="max-width:100%;"></a></p>
<p><em>Simulating the app on iOS</em></p>
</li>
<li>
<p>Confirm that the app displays "iOS" as the platform name.</p>
<p><a href="Images/platform-ios-simulate.png" target="_blank"><img src="Images/platform-ios-simulate.png" alt="BasicCordovaApp running on iOS" style="max-width:100%;"></a></p>
<p><em>BasicCordovaApp running on iOS</em></p>
</li>
<li>
<p>Return to Visual Studio and stop the debugger.</p>
</li>
</ol>
<p>Now that you know how to include platform-specific code in your app by placing it in platform-specific script files, it is time to learn about Cordova plugins — something that nearly every real-life Cordova app uses and that greatly speed the development process.</p>
<p><a name="Exercise3"></a></p>
<h2>Exercise 3: Add a Cordova plugin</h2>
<p>In Apache Cordova development, plugins provide access to native device capabilities that are outside the scope of what a traditional Web app can do. This includes access to device information, location information, accelerometers and other sensors, Bluetooth, and on-device data stores such as phone contacts and file systems. Plugins are cross-platform libraries that provide a JavaScript wrapper over the native code that implements the corresponding functionality.</p>
<p>Plugins are configured in the project's <strong>config.xml</strong> file. The Visual Studio Tools for Apache Cordova includes a list of predefined "core" plugins that can be selected from the designer UI. You can also add custom plugins that you download or write yourself. In this exercise, you will use the Device plugin to customize the UI with information about the operating system and device ID.</p>
<ol>
<li>
<p>Start by locating the <strong>config.xml</strong> file in Solution Explorer. Double-click the file to open it in the Visual Studio designer.</p>
</li>
<li>
<p>Click <strong>Plugins</strong> and make sure <strong>Core</strong> is selected. Scroll through the the list of available core plugins and select the <strong>Device</strong> plugin. Then click the <strong>Add</strong> button to install the plugin.</p>
<p><a href="Images/plugins-install-device.png" target="_blank"><img src="Images/plugins-install-device.png" alt="Installing the Device plugin" style="max-width:100%;"></a></p>
<p><em>Installing the Device plugin</em></p>
</li>
<li>
<p>Return to the <strong>index.html</strong> file that you edited in the previous exercise. Below the <code>&lt;h2 id="ex2Platform"&gt;Override Platform&lt;/h2&gt;</code> element that you added in <a href="#Exercise2">Exercise 2</a>, add the following statements. Then save the file.</p>
<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">h2</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>ex3Platform<span class="pl-pds">"</span></span>&gt;Plugin Platform&lt;/<span class="pl-ent">h2</span>&gt;
&lt;<span class="pl-ent">h2</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>ex3Id<span class="pl-pds">"</span></span>&gt;Plugin Device ID&lt;/<span class="pl-ent">h2</span>&gt;</pre></div>
</li>
<li>
<p>Reopen the <strong>index.js</strong> file in the *<strong>www/scripts</strong> folder. Add the following statements to the end of the <em>onDeviceReady</em> function. Then save the file.</p>
<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> devicePlatform <span class="pl-k">=</span> <span class="pl-smi">device</span>.<span class="pl-c1">platform</span>;
<span class="pl-k">var</span> deviceId <span class="pl-k">=</span> <span class="pl-smi">device</span>.<span class="pl-smi">uuid</span>;
<span class="pl-en">$</span>(<span class="pl-s"><span class="pl-pds">"</span>#ex3Platform<span class="pl-pds">"</span></span>).<span class="pl-en">html</span>(devicePlatform);
<span class="pl-en">$</span>(<span class="pl-s"><span class="pl-pds">"</span>#ex3Id<span class="pl-pds">"</span></span>).<span class="pl-en">html</span>(<span class="pl-s"><span class="pl-pds">"</span>ID: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> deviceId);</pre></div>
<blockquote>
<p>This code retrieves the Platform and UUID values from the Device plugin, and then updates the appropriate DOM elements with the values. The <em>onDeviceReady</em> function is called in response to the <em>deviceready</em> event, which is fired when the Cordova framework has been fully loaded and is ready to be used.</p>
</blockquote>
</li>
<li>
<p>Select either <strong>Android</strong> or <strong>iOS</strong> in the platform drop-down and make sure that one of the <strong>Simulate in Browser</strong> options is selected. Then click <strong>Simulate in Browser</strong> to run the app in Cordova Simulate.</p>
</li>
<li>
<p>Confirm that a new platform value ("iOS" or "Android") is displayed underneath the one you added in <a href="#Exercise2">Exercise 2</a>, and that a device ID is displayed as well.</p>
<p><a href="Images/plugins-android-simulate.png" target="_blank"><img src="Images/plugins-android-simulate.png" alt="Output from the Device plugin" style="max-width:100%;"></a></p>
<p><em>Output from the Device plugin</em></p>
</li>
<li>
<p>Return to Visual Studio and stop the debugger.</p>
</li>
</ol>
<p>If you select a different platform and run the app again, the platform name and device ID should update accordingly.</p>
<p><a name="Exercise4"></a></p>
<h2>Exercise 4: Deploy and connect to an Azure Mobile App</h2>
<p><a href="https://azure.microsoft.com/en-us/services/app-service/mobile/">Azure Mobile Apps</a>, which are part of the <a href="https://azure.microsoft.com/en-us/services/app-service/">Azure App Service</a> family of services, provide a convenient and powerful platform for adding back-end functionality to your Cordova apps. With Mobile Apps, you can create apps that store data in the cloud and support offline data synchronization, authentication and authorization, push notifications, and more. In this exercise, you will use Visual Studio to create a new Azure Mobile Apps instance. Then you will use the Mobile Apps Easy Tables feature to configure a database table and expose it through a REST endpoint.</p>
<ol>
<li>
<p>In Solution Explorer, double-click <strong>Connected Services</strong>.</p>
<p><a href="Images/azure-connectedservices-select.png" target="_blank"><img src="Images/azure-connectedservices-select.png" alt="Opening Connected Services" style="max-width:100%;"></a></p>
<p><em>Opening Connected Services</em></p>
</li>
<li>
<p>Click <strong>Mobile Backend with Azure App Service Mobile App</strong>.</p>
<p><a href="Images/azure-connectedservices-mobilebackend.png" target="_blank"><img src="Images/azure-connectedservices-mobilebackend.png" alt="Adding a mobile back-end" style="max-width:100%;"></a></p>
<p><em>Adding a mobile back-end</em></p>
</li>
<li>
<p>In the "Azure Mobile Apps" dialog, click <strong>Create Service</strong> to create a new Azure Mobile App.</p>
<blockquote>
<p>If you see an <strong>Add an Account</strong> button in the upper-right corner of the dialog, click it and sign in with a Microsoft account that has one or more Azure subscriptions associated with it before clicking <strong>Create service</strong>.</p>
</blockquote>
<p><a href="Images/azure-mobileapps-createaservice.png" target="_blank"><img src="Images/azure-mobileapps-createaservice.png" alt="Creating an Azure Mobile App" style="max-width:100%;"></a></p>
<p><em>Creating an Azure Mobile App</em></p>
</li>
<li>
<p>In the "Hosting" section of the "Create App Service" dialog, accept the default value for <strong>Mobile App Name</strong>. Click the <strong>New...</strong> button next to <strong>Resource Group</strong>, enter "BasicCordovaApp" as the resource-group name, and click <strong>OK</strong>. Now click the <strong>New...</strong> button next to <strong>App Service Plan</strong>. In the "Configure Service Plan" dialog, accept the default name, set <strong>Location</strong> to the region closest to you, and set <strong>Size</strong> to <strong>Free</strong>. Then click the <strong>OK</strong> button to dismiss the dialog.</p>
<p><a href="Images/azure-mobileapps-createappservicehosting.png" target="_blank"><img src="Images/azure-mobileapps-createappservicehosting.png" alt="Configuring hosting options" style="max-width:100%;"></a></p>
<p><em>Configuring hosting options</em></p>
</li>
<li>
<p>Click <strong>Services</strong>, and then click the <strong>+</strong> sign next to <strong>SQL Database</strong>.</p>
<p><a href="Images/azure-mobileapps-createappserviceservicesadddatabase.png" target="_blank"><img src="Images/azure-mobileapps-createappserviceservicesadddatabase.png" alt="Adding a SQL database" style="max-width:100%;"></a></p>
<p><em>Adding a SQL database</em></p>
</li>
<li>
<p>In the "Configure SQL Database" dialog, click the <strong>New...</strong> button next to <strong>SQL Server</strong>. In the ensuing dialog, accept the default server name, enter "cordova" for the user name, and enter "c0rd0va!" (those are zeroes, not capital Os) for the password. Then click <strong>OK</strong> to dismiss the dialog. Back in the "Configure SQL Database" dialog, accept the default database name, change <strong>Connection String Name</strong> to "MS_TableConnectionString," and click the <strong>OK</strong> button.</p>
<p><a href="Images/azure-mobileapps-createdatabase.png" target="_blank"><img src="Images/azure-mobileapps-createdatabase.png" alt="Configuring the SQL database and server" style="max-width:100%;"></a></p>
<p><em>Configuring the SQL database and server</em></p>
</li>
<li>
<p>Click the <strong>Create</strong> button in the "Create App Service" dialog to start provisioning the Azure Mobile App.</p>
<p><a href="Images/azure-mobileapps-createappservicecomplete.png" target="_blank"><img src="Images/azure-mobileapps-createappservicecomplete.png" alt="Creating the Mobile App" style="max-width:100%;"></a></p>
<p><em>Creating the Mobile App</em></p>
</li>
<li>
<p>Wait for provisioning to complete. (It may take a couple of minutes. You can monitor its progress at the bottom of the "Create App Service" dialog.) When the "Azure Mobile Apps" dialog appears, make sure the service you created is selected, and then click the <strong>Add</strong> button. This will start the process of connecting your Cordova app to the Azure Mobile App, including:</p>
<ul>
<li>Installing the Azure Mobile Apps plugin in your Cordova project</li>
<li>Adding a new JavaScript file to the <strong>www/services/mobileApps/setttings</strong> folder</li>
<li>Adding a new <code>script</code> element to <strong>index.html</strong> referencing the JavaScript file</li>
</ul>
<p><a href="Images/azure-connectedservices-addcreatedmobileapp.png" target="_blank"><img src="Images/azure-connectedservices-addcreatedmobileapp.png" alt="Configuring the project to connect to the Mobile App" style="max-width:100%;"></a></p>
<p><em>Configuring the project to connect to the Mobile App</em></p>
</li>
<li>
<p>The next step is to use the Azure Portal to configure the Azure Mobile App that serves as the back end for your Cordova app. This includes setting up Easy Tables, creating the database table in which your app will store data, and adding logic that will run on the server to validate user input. Begin by opening the <a href="https://portal.azure.com">Azure Portal</a> in your browser. If you are asked to sign, do so with your Microsoft account.</p>
</li>
<li>
<p>In the portal, click <strong>Resource groups</strong> in the ribbon on the left. In the "Resource groups" blade, click <strong>BasicCordovaApp</strong> to open the resource group that holds the Azure Mobile App that you created.</p>
<p><a href="Images/azure-portal-openresourcegroup.png" target="_blank"><img src="Images/azure-portal-openresourcegroup.png" alt="Opening the resource group" style="max-width:100%;"></a></p>
<p><em>Opening the resource group</em></p>
</li>
<li>
<p>Click the App Service in the list of resources.</p>
<p><a href="Images/azure-portal-openmobileapp.png" target="_blank"><img src="Images/azure-portal-openmobileapp.png" alt="Opening the App Service" style="max-width:100%;"></a></p>
<p><em>Opening the App Service</em></p>
</li>
<li>
<p>Scroll down the list of options on the left until you reach the "Mobile" section, and click <strong>Easy tables</strong>.</p>
<p><a href="Images/azure-portal-openeasytables.png" target="_blank"><img src="Images/azure-portal-openeasytables.png" alt="Configuring Easy Tables" style="max-width:100%;"></a></p>
<p><em>Configuring Easy Tables</em></p>
</li>
<li>
<p>Click <strong>Need to configure Easy Tables/Easy APIs - Click here to continue</strong>.</p>
<p><a href="Images/azure-portal-configureeasytables.png" target="_blank"><img src="Images/azure-portal-configureeasytables.png" alt="Configuring Easy Tables" style="max-width:100%;"></a></p>
<p><em>Configuring Easy Tables</em></p>
</li>
<li>
<p>Check the <strong>I acknowledge...</strong> box, and then click the <strong>Initialize App</strong> button.</p>
<p><a href="Images/azure-portal-easytablesconfig.png" target="_blank"><img src="Images/azure-portal-easytablesconfig.png" alt="Adding Easy Tables" style="max-width:100%;"></a></p>
<p><em>Adding Easy Tables</em></p>
</li>
<li>
<p>When the initialization completes, click <strong>+ Add</strong>. Then type "scores" into the <strong>Name</strong> field and click the <strong>OK</strong> button at the bottom of the blade.</p>
<p><a href="Images/azure-portal-addtable.png" target="_blank"><img src="Images/azure-portal-addtable.png" alt="Adding a &quot;scores&quot; table" style="max-width:100%;"></a></p>
<p><em>Adding a "scores" table</em></p>
</li>
<li>
<p>Click the "scores" table to open a blade for it, then click <strong>Edit script</strong>.</p>
<p><a href="Images/azure-portal-managetable.png" target="_blank"><img src="Images/azure-portal-managetable.png" alt="Editing the script for the &quot;scores&quot; table" style="max-width:100%;"></a></p>
<p><em>Editing the script for the "scores" table</em></p>
</li>
<li>
<p>Add the following code to the end of <strong>scores.js</strong> in the App Service Editor:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-smi">table</span>.<span class="pl-en">insert</span>(<span class="pl-k">function</span>(<span class="pl-smi">context</span>) {
	<span class="pl-k">if</span> (<span class="pl-smi">context</span>.<span class="pl-smi">item</span>.<span class="pl-smi">homeTeamName</span> <span class="pl-k">!==</span> <span class="pl-smi">context</span>.<span class="pl-smi">item</span>.<span class="pl-smi">awayTeamName</span>){
		<span class="pl-k">return</span> <span class="pl-smi">context</span>.<span class="pl-en">execute</span>();
	}
	<span class="pl-smi">context</span>.<span class="pl-smi">logger</span>.<span class="pl-en">error</span>(<span class="pl-s"><span class="pl-pds">'</span>Home Team and Away Team must be different.<span class="pl-pds">'</span></span>);
	<span class="pl-k">throw</span> <span class="pl-k">new</span> <span class="pl-en">Error</span>(<span class="pl-s"><span class="pl-pds">'</span>Home Team and Away Team must be different.<span class="pl-pds">'</span></span>);
});</pre></div>
</li>
</ol>
<p>This code validates user input by ensuring that the home team and away team names are different before committing to the database. You do not need to do anything special to save the code changes. Changes in the App Service Editor are saved as you go.</p>
<p><a name="Exercise5"></a></p>
<h2>Exercise 5: Connect to the Azure Mobile App</h2>
<p>Now that the Azure Mobile App has been deployed and configured, the next step is to connect to it from your app. In this exercise, you will connect to the Azure Mobile App and test the Cordova app with a cloud-based back end. But first, you will install the Cordova Notification plugin in your project so the app can display an error message if it is unable to connect to Azure.</p>
<ol>
<li>
<p>Return to Visual Studio and open the <strong>config.xml</strong> file in the root of the project.</p>
</li>
<li>
<p>Click <strong>Plugins</strong>, scroll down and select the Notification plugin, and click the <strong>Add</strong> button.</p>
<p><a href="Images/add-notifications-plugin.png" target="_blank"><img src="Images/add-notifications-plugin.png" alt="Adding the Notification plugin" style="max-width:100%;"></a></p>
<p><em>Adding the Notification plugin</em></p>
</li>
<li>
<p>Open <strong>index.html</strong> in the project's <strong>www</strong> folder. Replace the existing content inside the <code>&lt;div class="app"&gt;</code> element with the following HTML, and then save the file:</p>
<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">h1</span>&gt;Apache Cordova&lt;/<span class="pl-ent">h1</span>&gt;
&lt;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>newScore<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">div</span>&gt;&lt;<span class="pl-ent">label</span>&gt;Home Team: &lt;<span class="pl-ent">input</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>homeTeamName<span class="pl-pds">"</span></span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">label</span>&gt;&lt;/<span class="pl-ent">div</span>&gt;
    &lt;<span class="pl-ent">div</span>&gt;&lt;<span class="pl-ent">label</span>&gt;Home Score: &lt;<span class="pl-ent">input</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>homeTeamScore<span class="pl-pds">"</span></span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">label</span>&gt;&lt;/<span class="pl-ent">div</span>&gt;
    &lt;<span class="pl-ent">div</span>&gt;&lt;<span class="pl-ent">label</span>&gt;Away Team: &lt;<span class="pl-ent">input</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>awayTeamName<span class="pl-pds">"</span></span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">label</span>&gt;&lt;/<span class="pl-ent">div</span>&gt;
    &lt;<span class="pl-ent">div</span>&gt;&lt;<span class="pl-ent">label</span>&gt;Away Score: &lt;<span class="pl-ent">input</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>awayTeamScore<span class="pl-pds">"</span></span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">label</span>&gt;&lt;/<span class="pl-ent">div</span>&gt;
    &lt;<span class="pl-ent">button</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>newScoreButton<span class="pl-pds">"</span></span>&gt;Add Score&lt;/<span class="pl-ent">button</span>&gt;
&lt;/<span class="pl-ent">div</span>&gt;
&lt;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>scores<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">button</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>getScoresButton<span class="pl-pds">"</span></span>&gt;Refresh Scores&lt;/<span class="pl-ent">button</span>&gt;
    &lt;<span class="pl-ent">table</span>&gt;
        &lt;<span class="pl-ent">thead</span>&gt;
            &lt;<span class="pl-ent">tr</span>&gt;
                &lt;<span class="pl-ent">td</span>&gt;Home&lt;/<span class="pl-ent">td</span>&gt;
                &lt;<span class="pl-ent">td</span>&gt;Home Score&lt;/<span class="pl-ent">td</span>&gt;
                &lt;<span class="pl-ent">td</span>&gt;Away&lt;/<span class="pl-ent">td</span>&gt;
                &lt;<span class="pl-ent">td</span>&gt;Away Score&lt;/<span class="pl-ent">td</span>&gt;
            &lt;/<span class="pl-ent">tr</span>&gt;
        &lt;/<span class="pl-ent">thead</span>&gt;
        &lt;<span class="pl-ent">tbody</span>&gt;&lt;/<span class="pl-ent">tbody</span>&gt;
    &lt;/<span class="pl-ent">table</span>&gt;
&lt;/<span class="pl-ent">div</span>&gt;</pre></div>
</li>
<li>
<p>Open <strong>index.js</strong> in the project's <strong>www/scripts</strong> folder. Replace the <em>onDeviceReady</em> function with this one, and then save the file:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-k">function</span> <span class="pl-en">onDeviceReady</span>() {
    <span class="pl-c"><span class="pl-c">//</span> Handle the Cordova pause and resume events</span>
    <span class="pl-c1">document</span>.<span class="pl-c1">addEventListener</span>( <span class="pl-s"><span class="pl-pds">'</span>pause<span class="pl-pds">'</span></span>, <span class="pl-smi">onPause</span>.<span class="pl-en">bind</span>( <span class="pl-c1">this</span> ), <span class="pl-c1">false</span> );
    <span class="pl-c1">document</span>.<span class="pl-c1">addEventListener</span>( <span class="pl-s"><span class="pl-pds">'</span>resume<span class="pl-pds">'</span></span>, <span class="pl-smi">onResume</span>.<span class="pl-en">bind</span>( <span class="pl-c1">this</span> ), <span class="pl-c1">false</span> );
    
	<span class="pl-k">var</span> cordovaLabClient <span class="pl-k">=</span> <span class="pl-c1">UPDATE_THIS_VALUE</span>;
    <span class="pl-en">$</span>(<span class="pl-s"><span class="pl-pds">"</span>#getScoresButton<span class="pl-pds">"</span></span>).<span class="pl-c1">click</span>(<span class="pl-k">function</span> () {
        <span class="pl-en">updateScores</span>();
    });

    <span class="pl-en">$</span>(<span class="pl-s"><span class="pl-pds">"</span>#newScoreButton<span class="pl-pds">"</span></span>).<span class="pl-c1">click</span>(<span class="pl-k">function</span> () {
        <span class="pl-en">addNewScore</span>();
    });

    <span class="pl-k">function</span> <span class="pl-en">updateScores</span>() {
        <span class="pl-c"><span class="pl-c">//</span> Get the scores from the service</span>
        <span class="pl-k">var</span> scoresTable <span class="pl-k">=</span> <span class="pl-smi">cordovaLabClient</span>.<span class="pl-en">getTable</span>(<span class="pl-s"><span class="pl-pds">"</span>scores<span class="pl-pds">"</span></span>);
        scoresTable
            .<span class="pl-en">read</span>()
            .<span class="pl-en">then</span>(success, failure);

        <span class="pl-k">function</span> <span class="pl-en">success</span>(<span class="pl-smi">results</span>) {
            <span class="pl-c"><span class="pl-c">//</span> Access and clear the table content</span>
            <span class="pl-en">$</span>(<span class="pl-s"><span class="pl-pds">"</span>#scores table &gt; tbody<span class="pl-pds">"</span></span>).<span class="pl-en">empty</span>();

            <span class="pl-smi">$</span>.<span class="pl-en">each</span>(results, <span class="pl-k">function</span> (<span class="pl-smi">i</span>, <span class="pl-smi">item</span>) {
                <span class="pl-en">$</span>(<span class="pl-s"><span class="pl-pds">'</span>#scores table &gt; tbody:last-child<span class="pl-pds">'</span></span>)
                    .<span class="pl-c1">append</span>(
                        <span class="pl-s"><span class="pl-pds">"</span>&lt;tr&gt;<span class="pl-pds">"</span></span> <span class="pl-k">+</span>
                        <span class="pl-s"><span class="pl-pds">"</span>&lt;td&gt;<span class="pl-pds">"</span></span> <span class="pl-k">+</span> <span class="pl-smi">item</span>.<span class="pl-smi">homeTeamName</span> <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>&lt;/td&gt;<span class="pl-pds">"</span></span> <span class="pl-k">+</span>
                        <span class="pl-s"><span class="pl-pds">"</span>&lt;td&gt;<span class="pl-pds">"</span></span> <span class="pl-k">+</span> <span class="pl-smi">item</span>.<span class="pl-smi">homeTeamScore</span> <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>&lt;/td&gt;<span class="pl-pds">"</span></span> <span class="pl-k">+</span>
                        <span class="pl-s"><span class="pl-pds">"</span>&lt;td&gt;<span class="pl-pds">"</span></span> <span class="pl-k">+</span> <span class="pl-smi">item</span>.<span class="pl-smi">awayTeamName</span> <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>&lt;/td&gt;<span class="pl-pds">"</span></span> <span class="pl-k">+</span>
                        <span class="pl-s"><span class="pl-pds">"</span>&lt;td&gt;<span class="pl-pds">"</span></span> <span class="pl-k">+</span> <span class="pl-smi">item</span>.<span class="pl-smi">awayTeamScore</span> <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>&lt;/td&gt;<span class="pl-pds">"</span></span> <span class="pl-k">+</span>
                        <span class="pl-s"><span class="pl-pds">"</span>&lt;/tr&gt;<span class="pl-pds">"</span></span>);
            });
        }

        <span class="pl-k">function</span> <span class="pl-en">failure</span>(<span class="pl-smi">error</span>) {
            <span class="pl-k">throw</span> <span class="pl-k">new</span> <span class="pl-en">Error</span>(<span class="pl-s"><span class="pl-pds">"</span>Error loading data: <span class="pl-pds">"</span></span>, error);
        }
    }

    <span class="pl-k">function</span> <span class="pl-en">addNewScore</span>() {
        <span class="pl-c"><span class="pl-c">//</span> Get the values from the UI</span>
        <span class="pl-c"><span class="pl-c">//</span> Post the value to the service</span>
        <span class="pl-k">var</span> scoreEntry <span class="pl-k">=</span> {
            <span class="pl-s"><span class="pl-pds">"</span>homeTeamName<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-en">$</span>(<span class="pl-s"><span class="pl-pds">"</span>#homeTeamName<span class="pl-pds">"</span></span>).<span class="pl-en">val</span>(),
            <span class="pl-s"><span class="pl-pds">"</span>homeTeamScore<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-en">$</span>(<span class="pl-s"><span class="pl-pds">"</span>#homeTeamScore<span class="pl-pds">"</span></span>).<span class="pl-en">val</span>(),
            <span class="pl-s"><span class="pl-pds">"</span>awayTeamName<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-en">$</span>(<span class="pl-s"><span class="pl-pds">"</span>#awayTeamName<span class="pl-pds">"</span></span>).<span class="pl-en">val</span>(),
            <span class="pl-s"><span class="pl-pds">"</span>awayTeamScore<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-en">$</span>(<span class="pl-s"><span class="pl-pds">"</span>#awayTeamScore<span class="pl-pds">"</span></span>).<span class="pl-en">val</span>(),
        };

        <span class="pl-k">var</span> scoresTable <span class="pl-k">=</span> <span class="pl-smi">cordovaLabClient</span>.<span class="pl-en">getTable</span>(<span class="pl-s"><span class="pl-pds">"</span>scores<span class="pl-pds">"</span></span>);
        scoresTable
            .<span class="pl-en">insert</span>(scoreEntry)
            .<span class="pl-en">done</span>(insertSuccess, insertFailure);

        <span class="pl-k">function</span> <span class="pl-en">insertSuccess</span>(<span class="pl-smi">result</span>) {
            <span class="pl-k">if</span> (<span class="pl-smi">result</span>.<span class="pl-smi">error</span>) {
                <span class="pl-c1">navigator</span>.<span class="pl-smi">notification</span>.<span class="pl-c1">alert</span>(<span class="pl-s"><span class="pl-pds">"</span>Error inserting data: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> <span class="pl-smi">result</span>.<span class="pl-smi">error</span>);
                <span class="pl-k">return</span>;
            }

            <span class="pl-c"><span class="pl-c">//</span> Refresh the scores on success to pick up the new entry</span>
            <span class="pl-en">updateScores</span>();
        };

        <span class="pl-k">function</span> <span class="pl-en">insertFailure</span>(<span class="pl-smi">error</span>) {
            <span class="pl-c1">navigator</span>.<span class="pl-smi">notification</span>.<span class="pl-c1">alert</span>(<span class="pl-s"><span class="pl-pds">"</span>Error inserting data: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> <span class="pl-smi">error</span>);
        };
    }
};</pre></div>
<p>The <em>updateScores</em> function calls out to the Azure Mobile App to retrieve values from the "scores" table, and then uses those values to update the user interface. The <em>addNewScore</em> function retrieves input from the user and then calls back to the Mobile App to record a new score. If the call succeeds, the function calls <em>updateScores</em> to ensure that the table is udpated with the new entry.</p>
</li>
<li>
<p>In Solution Explorer, open the script file in the project's <strong>www/services/mobileApps/settings</strong> folder. Copy the variable name on the first line (for example, <code>website20170124044958Client</code>) to the clipboard.</p>
</li>
<li>
<p>Return to <strong>index.js</strong> and replace <em>UPDATE_THIS_VALUE</em> on line 15 with the variable name on the clipboard.</p>
</li>
<li>
<p>Open <strong>index.css</strong> file in the project's <strong>www/css</strong> folder. Replace the style definition for the <em>app</em> class with the following statements:</p>
<div class="highlight highlight-source-css"><pre><span class="pl-e">.app</span> {
    <span class="pl-c1"><span class="pl-c1">background</span></span>: <span class="pl-c1">url</span>(<span class="pl-v">../images/cordova.png</span>) <span class="pl-c1">no-repeat</span> <span class="pl-c1">center</span> <span class="pl-c1">top</span>; 
    <span class="pl-c1"><span class="pl-c1">position</span></span>: <span class="pl-c1">absolute</span>;             
    <span class="pl-c1"><span class="pl-c1">left</span></span>: <span class="pl-c1">50<span class="pl-k">%</span></span>;
    <span class="pl-c1"><span class="pl-c1">height</span></span>: <span class="pl-c1">50<span class="pl-k">px</span></span>;                  
    <span class="pl-c1"><span class="pl-c1">width</span></span>: <span class="pl-c1">225<span class="pl-k">px</span></span>;                   
    <span class="pl-c1"><span class="pl-c1">text-align</span></span>: <span class="pl-c1">center</span>;
    <span class="pl-c1"><span class="pl-c1">padding</span></span>: <span class="pl-c1">180<span class="pl-k">px</span></span> <span class="pl-c1">0<span class="pl-k">px</span></span> <span class="pl-c1">0<span class="pl-k">px</span></span> <span class="pl-c1">0<span class="pl-k">px</span></span>;     
    <span class="pl-c1"><span class="pl-c1">margin</span></span>: <span class="pl-c1">10<span class="pl-k">px</span></span> <span class="pl-c1">0<span class="pl-k">px</span></span> <span class="pl-c1">0<span class="pl-k">px</span></span> <span class="pl-c1">-112<span class="pl-k">px</span></span>;
}

<span class="pl-ent">button</span> {
    <span class="pl-c1"><span class="pl-c1">margin</span></span>: <span class="pl-c1">2<span class="pl-k">px</span></span>;
}</pre></div>
</li>
<li>
<p>Select either <strong>Android</strong> or <strong>iOS</strong> from the platform list. Then click <strong>Simulate in Browser</strong> to launch the app in the simulator.</p>
<p><a href="Images/basic-debug-simulateinbrowser.png" target="_blank"><img src="Images/basic-debug-simulateinbrowser.png" alt="Launching the app in Cordova Simulate" style="max-width:100%;"></a></p>
<p><em>Launching the app in Cordova Simulate</em></p>
</li>
<li>
<p>Enter the values shown below into the form fields, and then click the <strong>Add Score</strong> button.</p>
<p><a href="Images/azure-run-gooddata.png" target="_blank"><img src="Images/azure-run-gooddata.png" alt="Submitting a score" style="max-width:100%;"></a></p>
<p><em>Submitting a score</em></p>
</li>
<li>
<p>Enter two or three more scores, using the same home team and away team or different ones if you prefer.</p>
</li>
<li>
<p>Now test the server-side validation logic by entering a score in which <strong>HOME TEAM</strong> and <strong>AWAY TEAM</strong> are both set to "Us" and clicking the <strong>Add Score</strong> button. Confirm that you see the error message below, which was displayed with help from the Notification plugin that you added to the project. Then click <strong>OK</strong> to dismiss the error dialog.</p>
<p><a href="Images/azure-run-baddata.png" target="_blank"><img src="Images/azure-run-baddata.png" alt="Error message displayed when validation fails" style="max-width:100%;"></a></p>
<p><em>Error message displayed when validation fails</em></p>
</li>
</ol>
<p>Congratulations! You have built a Cordova app that works cross-platform, deployed an Azure Mobile App to serve as a back end, connected to the Mobile App from your application, and demonstrated that it works. All that's left now is to delete the Azure Mobile App so it doesn't run up charges against your Azure subscription.</p>
<p><a name="Exercise6"></a></p>
<h2>Exercise 6: Delete the Azure Mobile App</h2>
<p>In this exercise, you will delete the resource group created in <a href="#Exercise4">Exercise 4</a> when you deployed the Azure Mobile App. Deleting the resource group deletes everything in it and prevents any further charges from being incurred for it. Until you delete it, you will be charged for the App Service instance and for the Azure SQL database.</p>
<ol>
<li>
<p>In the Azure Portal, open the blade for the "BasicCordovaApp" resource group.</p>
<p><a href="Images/azure-portal-openresourcegroup.png" target="_blank"><img src="Images/azure-portal-openresourcegroup.png" alt="Opening the resource group" style="max-width:100%;"></a></p>
<p><em>Opening the resource group</em></p>
</li>
<li>
<p>Click the <strong>Delete</strong> button at the top of the blade.</p>
<p><a href="Images/azure-cleanup-deleteresourcegroup.png" target="_blank"><img src="Images/azure-cleanup-deleteresourcegroup.png" alt="Deleting the resource group" style="max-width:100%;"></a></p>
<p><em>Deleting the resource group</em></p>
</li>
<li>
<p>For safety, you are required to type in the resource group's name. (Once deleted, a resource group cannot be recovered.) Type the name of the resource group. Then click the <strong>Delete</strong> button to remove all traces of this lab from your account.</p>
</li>
</ol>
<p>After a few minutes, the resource group and all of its resources will be deleted.</p>
<h2>Summary</h2>
<p>In this hands-on lab, you learned how to:</p>
<ul>
<li>Create a new Cordova project in Visual Studio 2017</li>
<li>Use Cordova Simulate to test Cordova apps</li>
<li>Incorporate platform-specific resources in Cordova apps</li>
<li>Use Cordova Plugins to access device functionality</li>
<li>Connect Cordova apps to Azure Mobile App back ends</li>
</ul>
<p>Visual Studio 2017 and the Visual Studio Tools for Apache Cordova provide a rich foundation developing cross-platform mobile apps using the Cordova framework. With these tools, you can quickly stand up, develop, manage, test, and debug Cordova apps on a variety of platforms using Cordova Simulate or other simulators. Furthermore, with Visual Studio's Azure integration, you can quickly deploy a cloud-hosted back end and use it to extend both the functionality and the reach of the apps that you write.</p>
<hr>
<p>Copyright 2016 Microsoft Corporation. All rights reserved. Except where otherwise noted, these materials are licensed under the terms of the MIT License. You may use them according to the license as is most appropriate for your project. The terms of this license can be found at <a href="https://opensource.org/licenses/MIT">https://opensource.org/licenses/MIT</a>.</p>
</body>
</html>
<!-- This document was created with MarkdownPad, the Markdown editor for Windows (http://markdownpad.com) -->
